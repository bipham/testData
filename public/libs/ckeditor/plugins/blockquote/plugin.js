!function(){function e(e){for(var t,o=0,r=e.getChildCount();o<r&&(t=e.getChild(o));o++)if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())return!1;return!0}var t={exec:function(t){var o=t.getCommand("blockquote").state,r=t.getSelection(),a=r&&r.getRanges()[0];if(a){var n=r.createBookmarks();if(CKEDITOR.env.ie){var l,u=n[0].startNode,s=n[0].endNode;if(u&&"blockquote"==u.getParent().getName())for(l=u;l=l.getNext();)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){u.move(l,!0);break}if(s&&"blockquote"==s.getParent().getName())for(l=s;l=l.getPrevious();)if(l.type==CKEDITOR.NODE_ELEMENT&&l.isBlockBoundary()){s.move(l);break}}var c,i=a.createIterator();if(i.enlargeBr=t.config.enterMode!=CKEDITOR.ENTER_BR,o==CKEDITOR.TRISTATE_OFF){for(var g=[];c=i.getNextParagraph();)g.push(c);if(g.length<1){var m=t.document.createElement(t.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),d=n.shift();a.insertNode(m),m.append(new CKEDITOR.dom.text("\ufeff",t.document)),a.moveToBookmark(d),a.selectNodeContents(m),a.collapse(!0),d=a.createBookmark(),g.push(m),n.unshift(d)}for(var f=g[0].getParent(),E=[],k=0;k<g.length;k++)c=g[k],f=f.getCommonAncestor(c.getParent());for(var T={table:1,tbody:1,tr:1,ol:1,ul:1};T[f.getName()];)f=f.getParent();for(var v=null;g.length>0;){for(c=g.shift();!c.getParent().equals(f);)c=c.getParent();c.equals(v)||E.push(c),v=c}for(;E.length>0;)if("blockquote"==(c=E.shift()).getName()){for(var b=new CKEDITOR.dom.documentFragment(t.document);c.getFirst();)b.append(c.getFirst().remove()),g.push(b.getLast());b.replace(c)}else g.push(c);var h=t.document.createElement("blockquote");for(h.insertBefore(g[0]);g.length>0;)c=g.shift(),h.append(c)}else if(o==CKEDITOR.TRISTATE_ON){for(var p=[],N={};c=i.getNextParagraph();){for(var C=null,R=null;c.getParent();){if("blockquote"==c.getParent().getName()){C=c.getParent(),R=c;break}c=c.getParent()}C&&R&&!R.getCustomData("blockquote_moveout")&&(p.push(R),CKEDITOR.dom.element.setMarker(N,R,"blockquote_moveout",!0))}CKEDITOR.dom.element.clearAllMarkers(N);var O=[],D=[];for(N={};p.length>0;){var I=p.shift();h=I.getParent(),I.getPrevious()?I.getNext()?(I.breakParent(I.getParent()),D.push(I.getNext())):I.remove().insertAfter(h):I.remove().insertBefore(h),h.getCustomData("blockquote_processed")||(D.push(h),CKEDITOR.dom.element.setMarker(N,h,"blockquote_processed",!0)),O.push(I)}for(CKEDITOR.dom.element.clearAllMarkers(N),k=D.length-1;k>=0;k--)e(h=D[k])&&h.remove();if(t.config.enterMode==CKEDITOR.ENTER_BR)for(var q=!0;O.length;)if("div"==(I=O.shift()).getName()){b=new CKEDITOR.dom.documentFragment(t.document),q&&I.getPrevious()&&!(I.getPrevious().type==CKEDITOR.NODE_ELEMENT&&I.getPrevious().isBlockBoundary())&&b.append(t.document.createElement("br"));for(var P=I.getNext()&&!(I.getNext().type==CKEDITOR.NODE_ELEMENT&&I.getNext().isBlockBoundary());I.getFirst();)I.getFirst().remove().appendTo(b);P&&b.append(t.document.createElement("br")),b.replace(I),q=!1}}r.selectBookmarks(n),t.focus()}},refresh:function(e,t){var o=t.block||t.blockLimit;this.setState(e.elementPath(o).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"blockquote",hidpi:!0,init:function(e){e.blockless||(e.addCommand("blockquote",t),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}();