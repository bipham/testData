!function(){"use strict";function t(t,e,i){if(!t.getCustomData("indent_processed")){var s=this.editor,r=this.isIndent;if(e){var a=t.$.className.match(this.classNameRegex),l=0;if(a&&(a=a[1],l=CKEDITOR.tools.indexOf(e,a)+1),(l+=r?1:-1)<0)return;l=Math.min(l,e.length),l=Math.max(l,0),t.$.className=CKEDITOR.tools.ltrim(t.$.className.replace(this.classNameRegex,"")),l>0&&t.addClass(e[l-1])}else{var o=n(t,i),h=parseInt(t.getStyle(o),10),d=s.config.indentOffset||40;if(isNaN(h)&&(h=0),(h+=(r?1:-1)*d)<0)return;h=Math.max(h,0),h=Math.ceil(h/d)*d,t.setStyle(o,h?h+(s.config.indentUnit||"px"):""),""===t.getAttribute("style")&&t.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,t,"indent_processed",1)}}function e(t,e){var n=t.$.className.match(this.classNameRegex),i=this.isIndent;return n?!i||n[1]!=e.slice(-1):i}function n(t,e){return"ltr"==(e||t.getComputedStyle("direction"))?"margin-left":"margin-right"}function i(t){return parseInt(t.getStyle(n(t)),10)}var s=CKEDITOR.dtd.$listItem,r=CKEDITOR.dtd.$list,a=CKEDITOR.TRISTATE_DISABLED,l=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(n){function o(){h.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:d?null:"margin-left,margin-right",classes:d||null}},this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]],this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(d?"("+d.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(t,n){var r=n.block||n.blockLimit;if(!r.is(s)){var o=r.getAscendant(s);r=o&&n.contains(o)||r}return r.is(s)&&(r=r.getParent()),this.enterBr||this.getContext(n)?d?e.call(this,r,d)?l:a:this.isIndent?l:r?CKEDITOR[(i(r)||0)<=0?"TRISTATE_DISABLED":"TRISTATE_OFF"]:a:a},exec:function(e){var n,i=e.getSelection(),s=i&&i.getRanges()[0];if(n=e.elementPath().contains(r))t.call(this,n,d);else{var a,l=s.createIterator(),o=e.config.enterMode;for(l.enforceRealBlocks=!0,l.enlargeBr=o!=CKEDITOR.ENTER_BR;a=l.getNextParagraph(o==CKEDITOR.ENTER_P?"p":"div");)a.isReadOnly()||t.call(this,a,d)}return!0}}}}var h=CKEDITOR.plugins.indent,d=n.config.indentClasses;h.registerCommands(n,{indentblock:new o(n,"indentblock",!0),outdentblock:new o(n,"outdentblock")}),CKEDITOR.tools.extend(o.prototype,h.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:d?new RegExp("(?:^|\\s+)("+d.join("|")+")(?=$|\\s)"):null})}})}();