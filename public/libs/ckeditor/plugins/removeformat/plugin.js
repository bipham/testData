CKEDITOR.plugins.add("removeformat",{lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"removeformat",hidpi:!0,init:function(e){e.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),e.ui.addButton&&e.ui.addButton("RemoveFormat",{label:e.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(e){for(var t,o=e._.removeFormatRegex||(e._.removeFormatRegex=new RegExp("^(?:"+e.config.removeFormatTags.replace(/,/g,"|")+")$","i")),r=e._.removeAttributes||(e._.removeAttributes=e.config.removeFormatAttributes.split(",")),a=CKEDITOR.plugins.removeformat.filter,m=e.getSelection().getRanges(),n=m.createIterator();t=n.getNextRange();){t.collapsed||t.enlarge(CKEDITOR.ENLARGE_ELEMENT);var i,s=t.createBookmark(),l=s.startNode,g=s.endNode,c=function(t){for(var r,m=e.elementPath(t),n=m.elements,i=1;(r=n[i])&&!r.equals(m.block)&&!r.equals(m.blockLimit);i++)o.test(r.getName())&&a(e,r)&&t.breakParent(r)};if(c(l),g)for(c(g),i=l.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);i&&!i.equals(g);)if(i.isReadOnly()){if(i.getPosition(g)&CKEDITOR.POSITION_CONTAINS)break;i=i.getNext(function(e){return e.type==CKEDITOR.NODE_ELEMENT})}else{var u=i.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);!("img"==i.getName()&&i.data("cke-realelement"))&&a(e,i)&&(o.test(i.getName())?i.remove(1):(i.removeAttributes(r),e.fire("removeFormatCleanup",i))),i=u}t.moveToBookmark(s)}e.forceNextSelectionCheck(),e.getSelection().selectRanges(m)}}},filter:function(e,t){for(var o=e._.removeFormatFilters||[],r=0;r<o.length;r++)if(!1===o[r](t))return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(e){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(e)},CKEDITOR.config.removeFormatTags="b,big,cite,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign";