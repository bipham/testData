CKEDITOR.plugins.add("html5video",{requires:"widget",lang:"de,en,eu,es,ru,uk,fr",icons:"html5video",init:function(t){t.widgets.add("html5video",{button:t.lang.html5video.button,template:'<div class="ckeditor-html5-video"></div>',allowedContent:"div[data-responsive](!ckeditor-html5-video){text-align,float,margin-left,margin-right}; video[src,controls,autoplay,width, height]{max-width,height};",requiredContent:"div(ckeditor-html5-video); video[src,controls];",upcast:function(t){return"div"===t.name&&t.hasClass("ckeditor-html5-video")},dialog:"html5video",init:function(){var t="",e="",i=this.element.getStyle("text-align"),l="",s="";this.element.getChild(0)&&(t=this.element.getChild(0).getAttribute("src"),l=this.element.getChild(0).getAttribute("width"),s=this.element.getChild(0).getAttribute("height"),e=this.element.getChild(0).getAttribute("autoplay"),responsive=this.element.getAttribute("data-responsive")),t&&(this.setData("src",t),i?this.setData("align",i):this.setData("align","none"),l&&this.setData("width",l),s&&this.setData("height",s),e&&this.setData("autoplay","yes"),responsive&&this.setData("responsive",responsive))},data:function(){if(this.data.src){if(!this.element.getChild(0)){var t=new CKEDITOR.dom.element("video");t.setAttribute("controls","controls"),this.element.append(t)}this.element.getChild(0).setAttribute("src",this.data.src),this.data.width&&this.element.getChild(0).setAttribute("width",this.data.width),this.data.height&&this.element.getChild(0).setAttribute("height",this.data.height),this.data.responsive?(this.element.setAttribute("data-responsive",this.data.responsive),this.element.getChild(0).setStyle("max-width","100%"),this.element.getChild(0).setStyle("height","auto")):(this.element.getChild(0).removeStyle("max-width"),this.element.getChild(0).removeStyle("height"))}this.element.removeStyle("float"),this.element.removeStyle("margin-left"),this.element.removeStyle("margin-right"),"none"===this.data.align?this.element.removeStyle("text-align"):this.element.setStyle("text-align",this.data.align),"left"===this.data.align?(this.element.setStyle("float",this.data.align),this.element.setStyle("margin-right","10px")):"right"===this.data.align&&(this.element.setStyle("float",this.data.align),this.element.setStyle("margin-left","10px")),this.element.getChild(0)&&("yes"===this.data.autoplay?this.element.getChild(0).setAttribute("autoplay","autoplay"):this.element.getChild(0).removeAttribute("autoplay"))}}),t.contextMenu&&(t.addMenuGroup("html5videoGroup"),t.addMenuItem("html5videoPropertiesItem",{label:t.lang.html5video.videoProperties,icon:"html5video",command:"html5video",group:"html5videoGroup"}),t.contextMenu.addListener(function(t){if(t&&t.getChild(0)&&t.getChild(0).hasClass&&t.getChild(0).hasClass("ckeditor-html5-video"))return{html5videoPropertiesItem:CKEDITOR.TRISTATE_OFF}})),CKEDITOR.dialog.add("html5video",this.path+"dialogs/html5video.js")}});