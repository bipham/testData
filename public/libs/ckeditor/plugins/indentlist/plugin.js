!function(){"use strict";function t(t){for(var i,r=this,a=this.database,s=this.context,o=t.getSelection(),l=(o&&o.getRanges()).createIterator();i=l.getNextRange();){for(var d=i.getCommonAncestor();d&&(d.type!=CKEDITOR.NODE_ELEMENT||!s[d.getName()]);){if(t.editable().equals(d)){d=!1;break}d=d.getParent()}if(d||(d=i.startPath().contains(s))&&i.setEndAt(d,CKEDITOR.POSITION_BEFORE_END),!d){var E=i.getEnclosedNode();E&&E.type==CKEDITOR.NODE_ELEMENT&&E.getName()in s&&(i.setStartAt(E,CKEDITOR.POSITION_AFTER_START),i.setEndAt(E,CKEDITOR.POSITION_BEFORE_END),d=E)}if(d&&i.startContainer.type==CKEDITOR.NODE_ELEMENT&&i.startContainer.getName()in s){var u=new CKEDITOR.dom.walker(i);u.evaluator=e,i.startContainer=u.next()}if(d&&i.endContainer.type==CKEDITOR.NODE_ELEMENT&&i.endContainer.getName()in s&&((u=new CKEDITOR.dom.walker(i)).evaluator=e,i.endContainer=u.previous()),d)return function(e){for(var o=i.startContainer,l=i.endContainer;o&&!o.getParent().equals(e);)o=o.getParent();for(;l&&!l.getParent().equals(e);)l=l.getParent();if(!o||!l)return!1;for(var d=o,E=[],u=!1;!u;)d.equals(l)&&(u=!0),E.push(d),d=d.getNext();if(E.length<1)return!1;for(var g=e.getParents(!0),I=0;I<g.length;I++)if(g[I].getName&&s[g[I].getName()]){e=g[I];break}var f=r.isIndent?1:-1,C=E[0],T=E[E.length-1],D=CKEDITOR.plugins.list.listToArray(e,a),c=D[T.getCustomData("listarray_index")].indent;for(I=C.getCustomData("listarray_index");I<=T.getCustomData("listarray_index");I++)if(D[I].indent+=f,f>0){var O=D[I].parent;D[I].parent=new CKEDITOR.dom.element(O.getName(),O.getDocument())}for(I=T.getCustomData("listarray_index")+1;I<D.length&&D[I].indent>c;I++)D[I].indent+=f;var h=CKEDITOR.plugins.list.arrayToList(D,a,null,t.config.enterMode,e.getDirection());if(!r.isIndent){var m;if((m=e.getParent())&&m.is("li")){var R,p=h.listNode.getChildren(),N=[];for(I=p.count()-1;I>=0;I--)(R=p.getItem(I))&&R.is&&R.is("li")&&N.push(R)}}if(h&&h.listNode.replace(e),N&&N.length)for(I=0;I<N.length;I++){for(var K=N[I],v=K;(v=v.getNext())&&v.is&&v.getName()in s;)CKEDITOR.env.needsNbspFiller&&!K.getFirst(n)&&K.append(i.document.createText("Â ")),K.append(v);K.insertAfter(m)}return h&&t.fire("contentDomInvalidated"),!0}(d)}return 0}function e(t){return t.type==CKEDITOR.NODE_ELEMENT&&t.is("li")}function n(t){return i(t)&&r(t)}var i=CKEDITOR.dom.walker.whitespaces(!0),r=CKEDITOR.dom.walker.bookmark(!1,!0),a=CKEDITOR.TRISTATE_DISABLED,s=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(e){function n(e){i.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],e.on("key",function(t){var n=e.elementPath();if("wysiwyg"==e.mode&&t.data.keyCode==this.indentKey){if(!n)return;var i=this.getContext(n);if(i){if(this.isIndent&&CKEDITOR.plugins.indentList.firstItemInPath(this.context,n,i))return;e.execCommand(this.relatedGlobal),t.cancel()}}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(t,e){var n=this.getContext(e),i=CKEDITOR.plugins.indentList.firstItemInPath(this.context,e,n);return n&&this.isIndent&&!i?s:a}:function(t,e){return!this.getContext(e)||this.isIndent?a:s},exec:CKEDITOR.tools.bind(t,this)}}var i=CKEDITOR.plugins.indent;i.registerCommands(e,{indentlist:new n(e,"indentlist",!0),outdentlist:new n(e,"outdentlist")}),CKEDITOR.tools.extend(n.prototype,i.specificDefinition.prototype,{context:{ol:1,ul:1}})}}),CKEDITOR.plugins.indentList={},CKEDITOR.plugins.indentList.firstItemInPath=function(t,n,i){var r=n.contains(e);return i||(i=n.contains(t)),i&&r&&r.equals(i.getFirst(e))}}();